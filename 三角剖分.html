<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<script src="//cdn.bootcss.com/three.js/92/three.js"></script>
<script src="./delaunator.js"></script>
<script src="./OrbitControls.js"></script>
<script src="./earcut.js"></script>
<script src="./china.js"></script>
<script>
    var scene = new THREE.Scene();
    var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
    var controls = new THREE.OrbitControls( camera );

    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );

     var arr = [
         [
             119.267578125,
             46.6795944656402
         ],
         [
             106.787109375,
             42.032974332441405
         ],
         [
             91.845703125,
             45.089035564831036
         ],
         [
             84.990234375,
             49.03786794532644
         ],
         [
             72.158203125,
             38.685509760012
         ],
         [
             87.275390625,
             27.293689224852407
         ],
         [
             98.173828125,
             27.605670826465445
         ],
         [
             104.765625,
             20.3034175184893
         ],
         [
             117.68554687499999,
             22.43134015636061
         ],
         [
             121.81640624999999,
             32.76880048488168
         ],
         [
             118.740234375,
             38.272688535980976
         ],
         [
             121.46484375,
             40.84706035607122
         ],
         [
             124.27734374999999,
             40.245991504199026
         ],
         [
             132.802734375,
             45.336701909968134
         ],
         [
             129.814453125,
             49.38237278700955
         ],
         [
             122.51953124999999,
             53.27835301753182
         ],
         [
             116.71874999999999,
             49.55372551347579
         ],
         [
             119.17968749999999,
             46.73986059969267
         ],
         [
             121.453857421875,
             31.22039794921875
         ],
         [
             114.027099609375,
             32.97821044921875
         ],
         [
             116.3946533203125,
             39.90509033203125
         ],
         [
             106.083984375,
             30.794677734375
         ],
         [
             117.1197509765625,
             36.1834716796875
         ],
         [
             113.09326171875,
             29.3719482421875
         ],
         [
             114.3072509765625,
             34.79644775390625
         ],
         [
             114.2633056640625,
             30.58319091796875
         ],
         [
             106.5509033203125,
             29.56146240234375
         ],
         [
             104.0625,
             30.66558837890625
         ],
         [
             117.1746826171875,
             39.14154052734375
         ],
         [
             119.8883056640625,
             29.454345703125
         ],
         [
             123.431396484375,
             41.7919921875
         ],
         [
             105.7379150390625,
             34.5794677734375
         ],
         [
             110.775146484375,
             32.6458740234375
         ],
         [
             126.6448974609375,
             45.74981689453125
         ],
         [
             108.9239501953125,
             34.25811767578125
         ],
         [
             103.8372802734375,
             36.05438232421875
         ],
         [
             113.2470703125,
             23.115234375
         ],
         [
             118.773193359375,
             32.06085205078125
         ],
         [
             114.0655517578125,
             22.5439453125
         ],
         [
             112.554931640625,
             37.86712646484375
         ],
         [
             112.03857421875,
             22.92572021484375
         ],
         [
             125.321044921875,
             43.87939453125
         ],
         [
             110.5718994140625,
             21.3189697265625
         ],
         [
             112.9669189453125,
             28.1964111328125
         ],
         [
             116.993408203125,
             36.6668701171875
         ],
         [
             121.6021728515625,
             38.91082763671875
         ],
         [
             113.6480712890625,
             34.7552490234375
         ],
         [
             114.4775390625,
             38.0401611328125
         ],
         [
             109.7808837890625,
             39.60845947265625
         ],
         [
             126.5570068359375,
             43.84918212890625
         ],
         [
             120.157470703125,
             30.29205322265625
         ],
         [
             115.8782958984375,
             28.68255615234375
         ],
         [
             120.3717041015625,
             36.09832763671875
         ],
         [
             118.179931640625,
             39.6331787109375
         ],
         [
             114.0655517578125,
             32.12127685546875
         ],
         [
             87.5994873046875,
             43.79974365234375
         ],
         [
             123.9202880859375,
             41.85516357421875
         ],
         [
             112.4505615234375,
             34.68109130859375
         ],
         [
             117.279052734375,
             31.86309814453125
         ],
         [
             113.6260986328125,
             28.157958984375
         ],
         [
             114.466552734375,
             36.59820556640625
         ],
         [
             120.5914306640625,
             31.30279541015625
         ],
         [
             116.7132568359375,
             23.367919921875
         ],
         [
             109.8193359375,
             40.65216064453125
         ],
         [
             122.9864501953125,
             41.121826171875
         ],
         [
             117.1527099609375,
             34.178466796875
         ],
         [
             119.3060302734375,
             26.0595703125
         ],
         [
             106.7156982421875,
             26.5814208984375
         ],
         [
             100.21728515625,
             26.8670654296875
         ],
         [
             120.2838134765625,
             31.56646728515625
         ],
         [
             113.291015625,
             40.09185791015625
         ],
         [
             120.73974609375,
             31.6461181640625
         ],
         [
             108.69873046875,
             34.3377685546875
         ],
         [
             116.993408203125,
             32.6239013671875
         ],
         [
             102.7166748046875,
             25.037841796875
         ],
         [
             116.3616943359375,
             23.5272216796875
         ],
         [
             119.3994140625,
             35.99395751953125
         ],
         [
             115.48828125,
             38.85040283203125
         ],
         [
             123.760986328125,
             41.28662109375
         ],
         [
             119.94873046875,
             31.7724609375
         ],
         [
             116.7901611328125,
             33.97247314453125
         ],
         [
             113.2965087890625,
             33.73626708984375
         ],
         [
             123.958740234375,
             47.340087890625
         ],
         [
             120.662841796875,
             27.9986572265625
         ],
         [
             108.314208984375,
             22.81585693359375
         ],
         [
             114.32373046875,
             36.09832763671875
         ],
         [
             111.6485595703125,
             40.8087158203125
         ],
         [
             120.8660888671875,
             30.0146484375
         ],
         [
             101.75537109375,
             36.6229248046875
         ],
         [
             119.586181640625,
             39.9298095703125
         ],
         [
             112.60986328125,
             26.88629150390625
         ],
         [
             113.8623046875,
             35.30731201171875
         ],
         [
             130.2978515625,
             47.35107421875
         ],
         [
             116.6912841796875,
             39.50958251953125
         ],
         [
             121.5472412109375,
             29.8773193359375
         ],
         [
             121.4373779296875,
             37.474365234375
         ],
         [
             113.148193359375,
             27.83111572265625
         ],
         [
             111.7364501953125,
             35.20843505859375
         ],
         [
             114.8785400390625,
             40.8087158203125
         ],
         [
             104.776611328125,
             29.3389892578125
         ],
         [
             121.6571044921875,
             42.01446533203125
         ],
         [
             115.0433349609375,
             30.245361328125
         ],
         [
             123.167724609375,
             41.2701416015625
         ],
         [
             112.8955078125,
             27.84759521484375
         ],
         [
             118.05908203125,
             36.79046630859375
         ],
         [
             115.0048828125,
             35.7000732421875
         ],
         [
             120.87158203125,
             32.02789306640625
         ],
         [
             129.5947265625,
             44.58251953125
         ],
         [
             110.2862548828125,
             25.279541015625
         ],
         [
             110.3411865234375,
             21.280517578125
         ],
         [
             119.454345703125,
             32.20916748046875
         ],
         [
             124.3927001953125,
             40.1275634765625
         ],
         [
             113.5821533203125,
             24.79888916015625
         ],
         [
             120.12451171875,
             33.38470458984375
         ],
         [
             113.126220703125,
             23.02459716796875
         ],
         [
             122.047119140625,
             41.187744140625
         ],
         [
             110.3411865234375,
             20.0445556640625
         ],
         [
             119.90478515625,
             32.48931884765625
         ],
         [
             114.4940185546875,
             37.0623779296875
         ],
         [
             121.1407470703125,
             41.1053466796875
         ],
         [
             131.1492919921875,
             46.63421630859375
         ],
         [
             114.6478271484375,
             37.87811279296875
         ],
         [
             122.222900390625,
             40.66314697265625
         ],
         [
             117.652587890625,
             24.51324462890625
         ],
         [
             118.0810546875,
             24.4775390625
         ],
         [
             117.35595703125,
             32.93975830078125
         ],
         [
             86.033935546875,
             44.29962158203125
         ],
         [
             124.365234375,
             43.16253662109375
         ],
         [
             119.014892578125,
             33.58795166015625
         ],
         [
             130.3143310546875,
             46.79901123046875
         ],
         [
             105.0567626953125,
             29.58343505859375
         ],
         [
             119.432373046875,
             32.39593505859375
         ],
         [
             120.0311279296875,
             28.88031005859375
         ],
         [
             117.6416015625,
             39.02069091796875
         ],
         [
             113.082275390625,
             22.5823974609375
         ],
         [
             116.861572265625,
             38.3148193359375
         ],
         [
             111.676025390625,
             29.04510498046875
         ],
         [
             113.2305908203125,
             35.2386474609375
         ],
         [
             118.3721923828125,
             31.33575439453125
         ],
         [
             113.565673828125,
             22.2747802734375
         ],
         [
             112.2418212890625,
             30.3057861328125
         ],
         [
             102.6287841796875,
             37.9248046875
         ],
         [
             111.280517578125,
             30.7122802734375
         ],
         [
             106.270751953125,
             38.46588134765625
         ],
         [
             121.4373779296875,
             28.6798095703125
         ],
         [
             106.9024658203125,
             27.685546875
         ],
         [
             120.7452392578125,
             30.750732421875
         ],
         [
             125.13427734375,
             42.901611328125
         ],
         [
             112.1429443359375,
             32.0416259765625
         ],
         [
             101.700439453125,
             26.54571533203125
         ],
         [
             115.697021484375,
             37.72979736328125
         ],
         [
             116.575927734375,
             35.4034423828125
         ],
         [
             104.249267578125,
             23.3624267578125
         ],
         [
             117.9327392578125,
             40.97076416015625
         ],
         [
             113.8128662109375,
             34.01641845703125
         ],
         [
             126.595458984375,
             48.26568603515625
         ],
         [
             121.3714599609375,
             28.57818603515625
         ],
         [
             116.6363525390625,
             23.66455078125
         ],
         [
             120.5694580078125,
             30.0091552734375
         ],
         [
             114.0325927734375,
             33.57147216796875
         ],
         [
             113.5601806640625,
             37.85614013671875
         ],
         [
             120.4541015625,
             41.56951904296875
         ],
         [
             110.7806396484375,
             32.56622314453125
         ],
         [
             130.95703125,
             45.29937744140625
         ],
         [
             111.961669921875,
             21.85455322265625
         ],
         [
             119.0972900390625,
             36.70806884765625
         ],
         [
             119.15771484375,
             34.59869384765625
         ],
         [
             113.741455078125,
             23.04656982421875
         ],
         [
             116.290283203125,
             37.4468994140625
         ],
         [
             114.63134765625,
             33.63189697265625
         ],
         [
             119.0093994140625,
             25.4388427734375
         ],
         [
             115.0433349609375,
             40.60821533203125
         ],
         [
             113.851318359375,
             27.6141357421875
         ],
         [
             109.5941162109375,
             27.93548583984375
         ],
         [
             112.4560546875,
             23.04931640625
         ],
         [
             117.0428466796875,
             30.51177978515625
         ],
         [
             105.93017578125,
             26.24908447265625
         ],
         [
             118.9599609375,
             42.26715087890625
         ],
         [
             130.84716796875,
             45.76080322265625
         ],
         [
             113.3843994140625,
             22.5164794921875
         ],
         [
             80.26611328125,
             41.11083984375
         ],
         [
             123.837890625,
             42.2918701171875
         ],
         [
             112.82958984375,
             35.49957275390625
         ],
         [
             129.5068359375,
             42.9071044921875
         ],
         [
             113.3624267578125,
             31.70928955078125
         ],
         [
             117.9656982421875,
             28.45184326171875
         ],
         [
             122.816162109375,
             45.60699462890625
         ],
         [
             120.849609375,
             40.76202392578125
         ],
         [
             117.7789306640625,
             30.948486328125
         ],
         [
             117.2076416015625,
             29.29229736328125
         ],
         [
             118.4820556640625,
             37.45513916015625
         ],
         [
             110.489501953125,
             24.7796630859375
         ],
         [
             110.291748046875,
             20.0006103515625
         ],
         [
             109.0997314453125,
             21.48101806640625
         ],
         [
             114.3951416015625,
             23.082275390625
         ],
         [
             118.2952880859375,
             32.32177734375
         ],
         [
             75.9759521484375,
             39.45465087890625
         ],
         [
             118.3392333984375,
             35.0628662109375
         ],
         [
             113.5491943359375,
             30.9429931640625
         ],
         [
             111.3134765625,
             23.4832763671875
         ],
         [
             123.629150390625,
             47.2027587890625
         ],
         [
             104.7491455078125,
             31.45660400390625
         ],
         [
             122.2613525390625,
             43.6102294921875
         ],
         [
             81.2603759765625,
             40.51483154296875
         ],
         [
             115.982666015625,
             29.73175048828125
         ],
         [
             113.104248046875,
             41.02569580078125
         ],
         [
             89.1650390625,
             42.923583984375
         ],
         [
             115.4388427734375,
             35.24139404296875
         ],
         [
             111.6650390625,
             32.38494873046875
         ],
         [
             126.990966796875,
             46.636962890625
         ],
         [
             104.83154296875,
             26.5924072265625
         ],
         [
             112.5274658203125,
             32.99468994140625
         ],
         [
             122.003173828125,
             39.61669921875
         ],
         [
             119.454345703125,
             35.4254150390625
         ],
         [
             114.9774169921875,
             27.11700439453125
         ],
         [
             114.19189453125,
             35.8978271484375
         ]
     ];

     for(var a=0;a<china.features.length;a++) {
     //     var arr = china.features[a].geometry.coordinates
     //     if (arr.length < 3) {
     //         continue
     //     } else if(arr.length % 3 !== 0) {
     //         if (arr.length % 3 === 1) {
     //             arr.pop()
     //         } else {
     //             arr.pop()
     //             arr.pop()
     //         }
     //     }
         var data = earcut.flatten([arr]);
         var delaunay = {}
         delaunay.triangles = earcut(data.vertices, data.holes, data.dimensions);
         // const delaunay = Delaunator.from(arr);
         console.log(delaunay)
         var geometry = new THREE.Geometry();
         for(var i =0; i<arr.length - 2; i+=3) {
             geometry.vertices.push(
                 new THREE.Vector3( arr[i][0],arr[i][1],0 ),
                 new THREE.Vector3( arr[i+1][0],arr[i+1][1],0 ),
                 new THREE.Vector3( arr[i+2][0],arr[i+2][1],0 )
             );
         }
         for(var j=0;j<delaunay.triangles.length - 2;j+=3) {
             geometry.faces.push(new THREE.Face3( delaunay.triangles[j], delaunay.triangles[j+1], delaunay.triangles[j+2], new THREE.Vector3( 0, 1, 0 ), new THREE.Color( 0, 255, 0 )))
         }

         // geometry.computeFaceNormals();
         // geometry.computeVertexNormals();

         var material = new THREE.MeshBasicMaterial( {
             vertexColors: THREE.VertexColors,
             side: THREE.DoubleSide,
             wireframe: true
         } );
         var mesh = new THREE.Mesh( geometry, material ) ;

         console.log(mesh)
         scene.add(mesh)
     }

    camera.position.x = 180;
    camera.position.y = 40;
    camera.position.z = 50

    var animate = function () {
        requestAnimationFrame( animate );
        controls.update();
        renderer.render(scene, camera);
    };
    animate();
</script>
</body>
</html>